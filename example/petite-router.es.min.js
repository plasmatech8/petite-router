function t(t,e,r,n){return new(r||(r=Promise))((function(o,a){function u(t){try{s(n.next(t))}catch(t){a(t)}}function i(t){try{s(n.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(u,i)}s((n=n.apply(t,e||[])).next())}))}function e(t,e){var r,n,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(u=0)),u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function r(){!function(){function t(t){var e=t.target.closest("a"),r=e&&e.getAttribute("href");t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button||t.defaultPrevented||!r||e.target||e.host!==location.host||(t.preventDefault(),history.pushState({},"",r),n())}function e(t){var e=t.target.closest("a");(null==e?void 0:e.pathname)&&o(e.pathname)}function r(){n(),o()}addEventListener("popstate",r),addEventListener("replacestate",r),addEventListener("pushstate",r),addEventListener("click",t),addEventListener("mouseover",e)}(),n(),o()}function n(t){t||(t=window.location.pathname),document.querySelectorAll("[r-path]").forEach((function(e){var r=e.getAttribute("r-path"),n=e.getAttribute("r-title");t===r?(n&&(document.title=n),e.removeAttribute("hidden")):e.setAttribute("hidden","")}))}function o(r){return t(this,arguments,void 0,(function(t,r){var n,a,u,i,s,c,l,f,h,d;return void 0===r&&(r=document),e(this,(function(e){switch(e.label){case 0:t||(t=window.location.pathname),n=Array.from(r.querySelectorAll('[r-html]:not([r-html-status="success"],[r-html-status="loading"])')),a=0,u=n,e.label=1;case 1:if(!(a<u.length))return[3,7];if(i=u[a],s=i.getAttribute("r-html"),(c=null===(d=i.closest("[r-path]"))||void 0===d?void 0:d.getAttribute("r-path"))&&!t.startsWith(c)||!s)return[3,6];console.log("Injecting HTML from source ".concat(s," for ").concat(t)),e.label=2;case 2:return e.trys.push([2,5,,6]),i.setAttribute("r-html-status","loading"),[4,fetch(s)];case 3:return[4,e.sent().text()];case 4:return l=e.sent(),f=(new DOMParser).parseFromString(l,"text/html").body,o(t,f),i.replaceChildren.apply(i,Array.from(f.childNodes)),i.setAttribute("r-html-status","success"),[3,6];case 5:return h=e.sent(),console.error("Unable to fetch ".concat(s,":"),h),i.setAttribute("r-html-status","failed"),[3,6];case 6:return a++,[3,1];case 7:return[2]}}))}))}"function"==typeof SuppressedError&&SuppressedError;export{r as createRouter};
